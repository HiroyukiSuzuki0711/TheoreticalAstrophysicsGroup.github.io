language: ruby

bundler_args: --retry 3

install:
  # Install Jekyll and dependencies
  - bundle config build.nokogiri --use-system-libraries
  - bundle install

# branch whitelist
# The source branch and every branch starts with "pages-" for proposed changes
branches:
  only:
  - source
  - /pages-(.*)/

script: bundle exec rake site:deploy --quiet

env:
  global:
    secure: "fZU3U2KfHJTW8n8EnTggxwisjd5aeeQJeWZ/SX7UL5c9zaEto0mCgnKVUeaGVmunfJGXnsCkboBpV282VLpkKwXrAaRx/1OmNlC+HCjEoH7ZWummyj48i7BNqraI4DfOst+wTYexDfL1xZC9r34YOCNNe0egq9aDw3oXhHGWQjs="

# Generate your secure token with the travis gem:
# get Github token from your Travis CI profile page
# gem install travis
# travis encrypt 'GIT_NAME="YOUR_USERNAME" GIT_EMAIL="YOUR_EMAIL" GH_TOKEN=YOUR_TOKEN'
